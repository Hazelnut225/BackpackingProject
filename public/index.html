<html>
<style>
body {
  background-color: #3492eb;
}
  iframe {
  margin-left: 35%;
  margin-right: 35%;
    
  }
  form {
  margin-left: 35%;
    margin-right: 35%;
    
  }
  h1 {
  margin-left: 35%;
    margin-right: 35%;
    
  }
  button {
  margin-left: 35%;
    margin-right: 35%;
    
  }
  p{
  margin-left: 35%;
    margin-right: 35%;
   
  }
</style>
  <head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QDFEZMS523"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-QDFEZMS523');
</script></head>
<body>
<h1> Backpacking Project</h1>
<p> Backpacking Project is a free resource for anyone wanting to go on a backpacking trip and needing to find a campsite. 
The current campsites are in North Carolina because that is where I live. If you have a campsite to share plese submit it in the form below.</p>
<p>Click the button to get your coordinates for the form. The coordnates will be where your campsite will apper on the map.
The file is where you would put you pics. Your campsite should apper in 24 hours. If you are out of service get the Coordinates and save them. 
Then when you are in service fill out the form and submit it.
</p>
<button onclick="getLocation()">Get the coordnates for the form</button>
<p id="demo"></p>
<script>
var x = document.getElementById("demo");
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}
function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;
}
function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML = "An unknown error occurred."
      break;
  }
}
</script>
<form method="post" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?">
<label for="Shelter"> 
  <input id="shelter" type="radio" name="shelter-campsite">Shelter 
</label><br>
<label for="Campsite"> 
  <input id="Campsite" type="radio" name="shelter-campsite">Campsite 
</label><br>
<input type="Text" placeholder= "Coordinates" name="coordinates"><br>
  <span class="error"><?php echo $coordinatesErr;?></span>
  <input type="text" placeholder="title" name="title"><br>
  <span class="error"><?php echo $titleErr;?></span>
  <textarea id="description" name="description" placeholder= Description rows="6" cols="45"></textarea><br>
  <span class="error"><?php echo $descriptionErr;?></span>
<input name="howfarawayiswater" type="text" placeholder="How far away is water"><br>
  <span class="error"><?php echo $howfarawayiswaterErr;?></span>
<input type="file" placeholder= Add Image><br>
<button type=submit> Submit</button>
</form>
<iframe src="https://www.google.com/maps/d/embed?mid=1mq9sUsyBerogH-gvoe5Uh-uYk6oG2S_t" width="640" height="480"></iframe><br><br><br>
<P>Contact us at: ContactBackpackingProject@gmail.com</p>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="/backpacking-project/firebase/8.2.9/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="/backpacking-project/firebase/8.2.9/firebase-analytics.js"></script>

<!-- Initialize Firebase -->
<script src="/backpacking-project/firebase/init.js"></script>
  </body>
  <?php
function test_input($data) {
  $data = trim($data);
  $data = stripslashes($data);
  $data = htmlspecialchars($data);
  return $data;
}
if ($_SERVER["REQUEST_METHOD"] == "POST") {
  $shelter-campsite = test_input($_POST["shelter-campsite"]);
  $coordinates = test_input($_POST["coordinates"]);
  $description = test_input($_POST["description"]);
  $howfarawayiswater = test_input($_POST["howfarawayiswater"]);
  $title = test_input($_POST["title"]);
}
function test_input($data) {
  $data = trim($data);
  $data = stripslashes($data);
  $data = htmlspecialchars($data);
  return $data;
}
if($_POST["description"]) {
    mail("contactbackpackingproject@gmail.com", "New campsite", $_POST["description"], "From: contactbackpackingproject@gmail.com");
}
if ($_POST['submit']) {
    if (mail ($to, $subject, $body, $from)) { 
       $success = "Thank you for your campsite submission! you should see it on the map within 24 hours.";
    } else {
        $success = "Error, Try again.";
    }
}
?>
</html>
